(function(){var t={},q=function(a,g,h){var f=function(b,f){if(l(b)&&!r(b))for(var a=0,k=b.length;a<k;a++)f.apply(b,[a,b[a]]);if(n(b)&&!r(b))for(var m in b)b.hasOwnProperty(m)&&f.apply(b,[m,b[m]])},b=function(b,f,a){var k=[],m=function(b,d){var m=k.length+1;k.push(function(){return f(b,d,function(b){var f=k[m];return!b&&f?f():b||f?a(b):a()})})};if(l(b)&&!r(b))for(var s=0,g=b.length;s<g;s++)m(s,b[s]);else if(n(b)&&!r(b))for(s in b)b.hasOwnProperty(s)&&m(s,b[s]);else return a();return k[0]()};return"undefined"===
typeof h?f.apply(this,arguments):b.apply(this,arguments)},E=function(a,g,h){return Array.prototype.filter.apply(a,[g,h||this])},l=function(a){return"[object Array]"===Object.prototype.toString.call(a)},F=function(a){return"boolean"===typeof a},w=function(a){return"undefined"!==typeof a},r=function(a){if(u(a))return!1;if(null===a)return!0;if(l(a)||"string"===typeof a)return 0===a.length;if(n(a))for(var g in a)if(hasOwnProperty.call(a,g))return!1;return!0},A=function(a,g){if(l(a,g))return a.length!==
g.length?!1:Array.prototype.every.apply(a,[function(b,f,a){return g[f]===b}]);if(n(a,g)){var h=Object.keys(a),f=Object.keys(g);if(!A(h,f))return!1;for(key in a)if(!g[key]||a[key]!==g[key])return!1;return!0}return!1},x=function(a){return"function"===typeof a},B=function(a){return u(a)&&0===a%1},G=function(a){return null===a},u=function(a){return"number"===typeof a},n=function(a){return"[object Object]"===Object.prototype.toString.call(a)},p=function(a){return"string"===typeof a},y=function(a){return"undefined"===
typeof a},C=function(a,g){for(var h in g)g.hasOwnProperty(h)&&!a.hasOwnProperty(h)&&(a[h]=g[h]);return a},D=function(a,g){for(var h=[],f=0,b=a.length;f<b;f++){var d=a[f][g];-1===h.indexOf(d)&&h.push(d)}return h},H=function(){return!0};(function(){var a=function(f){var b=this,d={singleError:!0,messages:h,cache:!1};q(d,function(a,c){n(c)&&f[a]?b[a]=C(f[a],d[a]):n(c)&&!f[a]?b[a]=C({},d[a]):b[a]=w(f[a])?f[a]:d[a]});this.errors=new g(this)};a.prototype.attributes={};a.prototype.addAttribute=function(f,
b){return a.prototype.attributes[f]=b};a.prototype.addAttributeConstructor=function(f,b){return a.prototype.attributes[f]=b()};a.prototype.addAttribute("additionalProperties",function(f,b,d,a,c){var k=this;if(!0===d)return c();var m=Object.keys(b),m=E(m,function(b){return!a.properties[b]});if(r(m))return c();if(!1===d)return m.forEach(function(a){this.addError({property:this.joinPath(f,a),propertyValue:b[a]})},this),c();if(n(d))return q(m,function(a,c,e){return k.validateSchema(b[c],d,f+c,e)},c)});
a.prototype.addAttribute("divisibleBy",function(f,b,a,e,c){if(0===a)return this.addError("The value of this attribute should not be 0."),c();u(b)&&0!==b%a&&this.addError();return c()});a.prototype.addAttribute("enum",function(f,b,a,e,c){-1===a.indexOf(b)&&this.addError();return c()});a.prototype.addAttribute("except",function(f,b,a,e,c){-1!==a.indexOf(b)&&this.addError();return c()});a.prototype.addAttributeConstructor("format",function(){var f={"date-time":{type:"string",pattern:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/},
date:function(b){return p(b)?b.match(/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/):n(b)?"[object Date]"===Object.prototype.toString.call(b):!1},time:{type:"string",pattern:/^\d{2}:\d{2}:\d{2}$/},"utc-milisec":{type:"number"},regex:function(b){return b&&b.test&&b.exec},color:{type:"string"},style:{type:"string"},phone:{type:"number"},uri:{type:"string",pattern:/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|cat|coop|int|pro|tel|xxx|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2})?)|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/},
email:{type:"string",pattern:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/},"ip-address":{type:"string",pattern:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/},ipv6:{type:"string",pattern:/(?:(?:[a-f\d]{1,4}:)*(?:[a-f\d]{1,4}|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})|(?:(?:[a-f\d]{1,4}:)*[a-f\d]{1,4})?::(?:(?:[a-f\d]{1,4}:)*(?:[a-f\d]{1,4}|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}))?)/},
"host-name":{type:"string"},alpha:{required:!0,type:"string",pattern:/^[a-zA-Z]+$/},alphanumeric:{required:!0,type:["string","number"],pattern:/^[a-zA-Z0-9]+$/},decimal:function(b){return u(b)?(b+"").match(/^[0-9]+(\.[0-9]{1,2})?$/):!1},percentage:{required:!0,type:["string","number"],pattern:/^-?[0-9]{0,2}(\.[0-9]{1,2})?$|^-?(100)(\.[0]{1,2})?$/,minimum:-100,maximum:100},port:{required:!0,type:["string","number"],pattern:/\:\d+/}};q({url:"uri",ip:"ip-address",ipv4:"ip-address",host:"host-name",hostName:"host-name"},
function(b,a){f[b]=f[a]});return function(b,a,e,c,k){if(n(e))return this.validateProperty(b,a,e,k);if(p(e)&&!Object.prototype.hasOwnProperty.apply(f,[e]))return this.addError("The format \u2018"+e+"\u2019 is not supported."),k();if(p(e)){e=f[e];if(x(e))return e(a)||this.addError(),k();if(n(e))return this.validateProperty(b,a,e,k)}}});a.prototype.addAttribute("length",function(f,b,a,e,c){p(b)&&b.length!==a&&this.addError();return c()});a.prototype.addAttribute("maximum",function(f,b,a,e,c){u(b)&&(e.exclusiveMaximum&&
b>=a||b>a)&&this.addError();return c()});a.prototype.addAttribute("maxItems",function(f,b,a,e,c){l(b)&&b.length>a&&this.addError();return c()});a.prototype.addAttribute("maxLength",function(f,b,a,e,c){p(b)&&b.length>a&&this.addError();return c()});a.prototype.addAttribute("minimum",function(f,b,a,e,c){u(b)&&(e.exclusiveMinimum&&b<=a||b<a)&&this.addError();return c()});a.prototype.addAttribute("minItems",function(f,b,a,e,c){l(b)&&b.length<a&&this.addError();return c()});a.prototype.addAttribute("minLength",
function(f,b,a,e,c){p(b)&&b.length<a&&this.addError();return c()});a.prototype.addAttribute("pattern",function(f,b,a,e,c){p(b)&&!b.match(a)&&this.addError();return c()});(function(){a.prototype.addAttribute("patternProperties",function(f,b,a,e,c){var k=this;if(r(a))return c();var m={},g=Object.keys(a);q(b,function(b,f){q(g,function(f,c){b.match(RegExp(c))&&(m[b]=a[c])})});if(r(m))return c();q(m,function(a,d,c){return k.validateSchema(b[a],d,k.joinPath(f,a),c)},c)})})();a.prototype.addAttribute("required",
function(a,b,d,e,c){d&&(a=y(b),b=(p(b)||l(b)||n(b))&&r(b),(a||b)&&this.addError());return c()});a.prototype.addAttributeConstructor("type",function(){var a={string:p,number:u,"function":x,"boolean":F,object:n,array:l,integer:B,"int":B,"null":G,any:H};return function(b,d,e,c,k){if(l(e)){if(!Array.prototype.every.apply(e,[function(b){return Object.prototype.hasOwnProperty.apply(a,[b])}]))return this.addError("One of the following types \u2018"+e.join(",")+"\u2019 is not supported."),k();e.some(function(b){return a[b](d)})||
this.addError()}else Object.prototype.hasOwnProperty.apply(a,[e])?a[e](d)||this.addError():this.addError("Type \u2018"+e+"\u2019 is not supported.");return k()}});(function(){a.prototype.addAttribute("uniqueItems",function(a,b,d,e,c){var k=this;q(b,function(d,c){p(c)&&b.indexOf(c)<d&&k.addError();(n(c)||l(c))&&b.forEach(function(b,e){e!==d&&A(c,b)&&k.addError({property:k.joinPath(a,e)})})});return c()})})();var g=function(a){this.length=0;this.errorMessages=a.messages};g.prototype.renderErrorMessage=
function(a){var b=this.errorMessages[a.attributeName];return b&&x(b)?b(a.property,a.propertyValue,a.attributeValue):b&&p(b)?(["property","propertyValue","attributeValue"].forEach(function(d){b=b.replace(RegExp("{{"+d+"}}","g"),a[d])}),b=b.replace(/{{validator}}/g,a.attributeValue),b.replace(/\s+/g," ")):a.message};g.prototype.push=function(a){this[this.length]={property:a.property,propertyValue:a.propertyValue,attributeName:a.attributeName,attributeValue:a.attributeValue,message:this.renderErrorMessage(a),
validator:a.attributeName,validatorName:a.attributeName,validatorValue:a.attributeValue};this.length+=1};g.prototype.getProperties=function(){return D(this,"property")};g.prototype.getMessages=function(){return D(this,"message")};var h={required:function(a,b,d){return"The \u2018"+a+"\u2019 property is required."},minLength:function(a,b,d){return["The "+a+" property must be at least "+d+" characters.","The length of the property is "+b.length+"."].join(" ")},maxLength:function(a,b,d){return["The "+
a+" property must not exceed "+d+" character"+(1<d?"s":"")+".","The length of the property is "+b.length+"."].join(" ")},length:function(a,b,d){return["The "+a+" property must be exactly "+d+" character"+(1<d?"s":"")+".","The length of the property is "+b.length+"."].join(" ")},format:function(a,b,d){return["The \u2018"+a+"\u2019 property must be a/an \u2018"+d+"\u2019.","The current value of the property is \u2018"+b+"\u2019"].join(" ")},type:function(a,b,d){return["The \u2018"+a+"\u2019 property must be "+
(-1<"aeiou".indexOf(d[0])?"an":"a")+" \u2018"+d+"\u2019.","The type of the property is \u2018"+typeof b+"\u2019"].join(" ")},except:function(a,b,d){},minimum:function(a,b,d){return["The minimum value of the \u2018"+a+"\u2019 must be "+d+".","The current value of the property is \u2018"+b+"\u2019"].join(" ")},maximum:function(a,b,d){return["The maximum value of the \u2018"+a+"\u2019 must be "+d+".","The current value of the property is \u2018"+b+"\u2019."].join(" ")},pattern:function(a,b,d){return"The \u2018"+
a+"\u2019 does not match the \u2018"+d+"\u2019 pattern."},maxItems:function(a,b,d){return["The \u2018"+a+"\u2019 property must not contain more than \u2018"+d+"\u2019 items.","Currently it contains \u2018"+b.items+"\u2019 items."].join(" ")},minItems:function(a,b,d){return["The \u2018"+a+"\u2019 property must contain at least \u2018"+d+"\u2019 items.","Currently it contains \u2018"+b.items+"\u2019 items."].join(" ")},divisibleBy:function(a,b,d){return"The \u2018"+a+"\u2019 is not divisible by \u2018"+
d+"\u2019."},uniqueItems:function(a,b,d){return"All items in the \u2018"+a+"\u2019 property must be unique."},"enum":function(a,b,d){return"Value of the \u2018"+a+"\u2019 must be "+d.join(" or ")+"."}};a.prototype.getProperty=function(a,b){if(b)return w(b[a])?b[a]:void 0};a.prototype.joinPath=function(a,b){a=a||"";b+="";return b.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)?a?a+"."+b:b:b.match(/^\d+$/)?a+"["+b+"]":a+'["'+b+'"]'};a.prototype.validate=function(a,b,d){var e=this;this.instance=a;this.schema=b;var c=
function(){return 0!==e.errors.length?d(e.errors):d()};if(-1!=="string number function boolean integer int null".split(" ").indexOf(b.type))return this.validateProperty(void 0,a,b,c);if(-1!==["object","array"].indexOf(b.type)){if(p(a))try{a=JSON.parse(a)}catch(k){}return this.validateSchema(a,b,"",c)}if("any"===b.type||!b.type){if(p(a))try{return a=JSON.parse(a),this.validateSchema(a,b,"",c)}catch(m){}return n(a)||l(a)?this.validateSchema(a,b,"",c):this.validateProperty(void 0,a,b,c)}};a.prototype.validateItems=
function(a,b,d,e){var c=this;return l(b.items)?y(b.additionalItems)||!0===b.additionalItems?q(b.items,function(b,e,g){return c.validateSchema(a[b],e,c.joinPath(d,b),g)},e):q(a,function(a,f,e){if(b.items[a]||n(b.additionalItems))return c.validateSchema(f,b.items[a],c.joinPath(d,a),e);if(!1===b.additionalItems)return c.errors.push({property:c.joinPath(d,a),propertyValue:f,attributeName:"additionalItems",attributeValue:!1}),e()},e):n(b.items)&&a&&!r(a)?q(a,function(e,m,g){return c.validateSchema(a[e],
b.items,c.joinPath(d,e),g)},e):e()};a.prototype.validateProperties=function(a,b,d,e){var c=this;return q(b.properties,function(e,g,h){var n="object"===g.type&&g.properties,p="array"===g.type,l=c.getProperty(e,a),z=c.joinPath(d,e);return n||p?c.validateSchema(l,b.properties[e],z,h):c.validateProperty(z,l,g,h)},e)};a.prototype.validateProperty=function(a,b,d,e){var c=this,g={};"validateItems validateProperties validateSchema validateProperty getProperty attributes errors joinPath".split(" ").forEach(function(a){g[a]=
this[a]},c);return!0!==d.required&&y(b)?e():q(c.attributes,function(e,h,l){var q=c.errors.length;g.addError=function(g){return n(g)?c.errors.push({property:g.property||a,propertyValue:g.propertyValue||b,attributeName:g.attributeName||e,attributeValue:g.attributeValue||d[e],message:g.message||void 0}):c.errors.push({property:a,propertyValue:b,attributeName:e,attributeValue:d[e],message:g})};var r=function(a){return!0===a||p(a)?(g.addError(a),l(!0)):c.errors.length>q&&c.singleError?l(!0):l()};return w(d[e])?
h.apply(g,[a,b,d[e],d,r]):l()},e)};a.prototype.validateSchema=function(a,b,d,e){var c=this;return c.validateProperty(d,a,b,function(g){return b.properties?c.validateProperties(a,b,d,e):b.items?c.validateItems(a,b,d,e):e()})};t.json=function(){return{validate:function(f,b,d,e){"function"===typeof d&&(e=d,d={});return(new a(d)).validate(f,b,e)},addAttribute:function(f,b){return a.prototype.addAttribute.apply(a,arguments)},addAttributeConstructor:function(f,b){return a.prototype.addAttributeConstructor.apply(a,
arguments)}}}()})();var v=function(a){if(!Object.prototype.hasOwnProperty.apply(t,[a]))throw Error("The \u2018"+a+"\u2019 engine is not supported. Please use a different one.");return t[a]};v.validate=function(a,g,h,f){var b=t.json;return b.validate.apply(b,arguments)};v.addValidator=function(a,g){var h=t.json;return h.addAttribute.apply(h,arguments)};v.addAttribute=function(a,g){var h=t.json;return h.addAttribute.apply(h,arguments)};v.addAttributeConstructor=function(a,g){var h=t.json;return h.addAttributeConstructor.apply(h,
arguments)};"undefined"!==typeof module&&module.exports?module.exports=v:"undefined"!==typeof define?define(function(){return v}):this.amanda=v})();
